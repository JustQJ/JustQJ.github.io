<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"justqj.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="记录个人学习的知识和技术">
<meta property="og:type" content="website">
<meta property="og:title" content="流年的个人博客">
<meta property="og:url" content="https://justqj.github.io/page/2/index.html">
<meta property="og:site_name" content="流年的个人博客">
<meta property="og:description" content="记录个人学习的知识和技术">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="流年">
<meta property="article:tag" content="个人笔记、计算机技术、备忘录">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://justqj.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>流年的个人博客</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?41fc030db57d5570dd22f78997dc4a7e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">流年的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">知识记录贴</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://justqj.github.io/2023/06/25/%E5%AE%89%E8%A3%85pyaudio/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="流年">
      <meta itemprop="description" content="记录个人学习的知识和技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流年的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/%E5%AE%89%E8%A3%85pyaudio/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-25 16:16:30" itemprop="dateCreated datePublished" datetime="2023-06-25T16:16:30+08:00">2023-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-03-31 23:21:16" itemprop="dateModified" datetime="2023-03-31T23:21:16+08:00">2023-03-31</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>安装教程<br><a target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/how-to-install-pyaudio-l4t-32-2-3/115152">https://forums.developer.nvidia.com/t/how-to-install-pyaudio-l4t-32-2-3/115152</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://justqj.github.io/2023/06/25/pytorch%E6%A8%A1%E5%9E%8B%E4%BF%9D%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="流年">
      <meta itemprop="description" content="记录个人学习的知识和技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流年的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/pytorch%E6%A8%A1%E5%9E%8B%E4%BF%9D%E5%AD%98/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-25 16:16:30" itemprop="dateCreated datePublished" datetime="2023-06-25T16:16:30+08:00">2023-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-01 11:39:16" itemprop="dateModified" datetime="2023-04-01T11:39:16+08:00">2023-04-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="模型的保存"><a href="#模型的保存" class="headerlink" title="模型的保存"></a>模型的保存</h1><ol>
<li>保存训练好的模型最好load到cpu上再保存。</li>
<li>使用torch.nn.DataParallel()训练的模型，注意保存时要去掉module模块，不然加载时也需要先用DataParallel()包裹才能加载。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">不去掉module保存：</span><br><span class="line">torch.save(model.state_dict(), &#x27;validate.pth.tar&#x27;)</span><br><span class="line">加载：</span><br><span class="line">model = torch.nn.DataParallel(model)</span><br><span class="line">state = torch.load(&#x27;validate.pth.tar&#x27;)</span><br><span class="line">model.load_state_dict(state)</span><br><span class="line"></span><br><span class="line">去掉module并在cpu上保存：</span><br><span class="line">model = model.to(&#x27;cpu&#x27;)</span><br><span class="line">torch.save(model.module.state_dict(),&#x27;validate.pth.tar&#x27;)</span><br><span class="line">加载：</span><br><span class="line">state = torch.load(&#x27;validate.pth.tar&#x27;)</span><br><span class="line">model.load_state_dict(state)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://justqj.github.io/2023/06/25/pytorch%E5%8A%A0%E9%80%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="流年">
      <meta itemprop="description" content="记录个人学习的知识和技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流年的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/pytorch%E5%8A%A0%E9%80%9F/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-25 16:16:30" itemprop="dateCreated datePublished" datetime="2023-06-25T16:16:30+08:00">2023-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-17 21:44:17" itemprop="dateModified" datetime="2023-02-17T21:44:17+08:00">2023-02-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>torch.backends.cudnn.benchmark = True<br>DataLoader(dataset=test_dataset, batch_size=64, shuffle=False, num_workers=16, drop_last=False, pin_memory=True)<br>model = nn.DataParallel(model)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://justqj.github.io/2023/06/25/Linux%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="流年">
      <meta itemprop="description" content="记录个人学习的知识和技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流年的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/Linux%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-25 16:16:30" itemprop="dateCreated datePublished" datetime="2023-06-25T16:16:30+08:00">2023-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-12 22:46:57" itemprop="dateModified" datetime="2023-06-12T22:46:57+08:00">2023-06-12</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h2><ol>
<li>添加普通用户<br>sudo adduser xxx </li>
<li>添加root权限<br>sudo adduser xxx sudo</li>
</ol>
<h2 id="sudo命令下使用用户的环境变量"><a href="#sudo命令下使用用户的环境变量" class="headerlink" title="sudo命令下使用用户的环境变量"></a>sudo命令下使用用户的环境变量</h2><p>使用 <code>sudo -E</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://justqj.github.io/2023/06/25/onedrivelinux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="流年">
      <meta itemprop="description" content="记录个人学习的知识和技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流年的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/onedrivelinux/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-25 16:16:30" itemprop="dateCreated datePublished" datetime="2023-06-25T16:16:30+08:00">2023-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-03-03 14:56:46" itemprop="dateModified" datetime="2023-03-03T14:56:46+08:00">2023-03-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>github地址 <a target="_blank" rel="noopener" href="https://github.com/abraunegg/onedrive">https://github.com/abraunegg/onedrive</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">onedrive --synchronize 将云盘上的数据同步到本地对应的文件夹</span><br><span class="line">onedrive --synchronize --local-first 将本地同步到云盘，会删去云盘上本地没有的数据</span><br><span class="line">onedrive --synchronize --single-directory &#x27;&lt;dir_name&gt;&#x27; 只同步一个文件夹</span><br><span class="line">onedrive --synchronize --download-only 只下载</span><br><span class="line">onedrive --synchronize --upload-only 只上传</span><br><span class="line">onedrive --synchronize --upload-only --no-remote-delete 同步上传但是不删除云盘上本地没有的文件</span><br><span class="line">onedrive --synchronize --upload-only --single-directory &#x27;&lt;dir_name&gt;&#x27; 这样组合就可以上传本地的一个文件夹，**我常用**</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://justqj.github.io/2023/06/25/JetsonNx%E5%88%B7%E6%9C%BA%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="流年">
      <meta itemprop="description" content="记录个人学习的知识和技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流年的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/JetsonNx%E5%88%B7%E6%9C%BA%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-25 16:16:30" itemprop="dateCreated datePublished" datetime="2023-06-25T16:16:30+08:00">2023-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-23 17:37:25" itemprop="dateModified" datetime="2023-04-23T17:37:25+08:00">2023-04-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="需要的设备"><a href="#需要的设备" class="headerlink" title="需要的设备"></a>需要的设备</h2><ol>
<li>Jetson Xavier NX</li>
<li>一台安装有Ubuntu系统的主机，可以是虚拟机</li>
<li>usb-microusb线用于连接板子和主机</li>
<li>鼠标、键盘、屏幕（最好有，没有就通过串口通信）</li>
<li>网线（一般可以不用）</li>
</ol>
<h2 id="安装操作系统"><a href="#安装操作系统" class="headerlink" title="安装操作系统"></a>安装操作系统</h2><ol>
<li><p>在主机上安装Ubuntu系统，一般是使用VMware虚拟机安装。需要根据要安装在jetson上的系统版本选择对应的主机上的Ubuntu系统系统版本。例如安装JetPack4.x就选择Ubuntu18.0；安装JetPack5.x就选择Ubuntu20.0。</p>
</li>
<li><p>在Ubuntu系统中安装<a target="_blank" rel="noopener" href="https://developer.nvidia.com/zh-cn/embedded/jetpack">sdkmanager</a>，注册NVIDIA账号。</p>
</li>
<li><p>将板子设置为recovery模式，就是使用一根线将板子上面的那排引脚导数第二个和倒数第三个短接起来（使用GND和REC标记），接通电源， 将板子通过usb-microusb线连接到主机。</p>
</li>
<li><p>在Ubuntu系统中发现连接的USB设备后(lsusb可以查看)，运行sdkmanager命令可以进入<a target="_blank" rel="noopener" href="https://docs.nvidia.com/sdk-manager/install-with-sdkm-jetson/index.html">安装流程</a>。在安装流程中，一般我们只安装系统，不安装其他东西，即在<code>Step 01</code>中只勾上第一行的Jetson，第二行的Target Hardware，第三行的Linux（注意JetPack版本）。在<code>Step 03</code>中只安装Jetson OS，不选择Jetson SDK Components, 这部分我们后面安装。同时在<code>Step 03</code>中的Setup中，由于没有网线，选择Manual Setup，同时设置username和password。</p>
</li>
</ol>
<h2 id="开机设置"><a href="#开机设置" class="headerlink" title="开机设置"></a>开机设置</h2><p>这里分为两种：有设备和无设备 </p>
<h3 id="有设备"><a href="#有设备" class="headerlink" title="有设备"></a>有设备</h3><p>如果有鼠标、键盘和屏幕这几个设备，就直接连到Jetson 板子上，然后启动，连接网络。</p>
<h3 id="没有设备"><a href="#没有设备" class="headerlink" title="没有设备"></a>没有设备</h3><p>在windows中，使用PuTTY通过usb-microusb线连接进入板子之中。就是将usb-microusb连接到Windows后，打开PuTTY，进行如下图所示的设置，就可以创建连接，进入到刚才在Jetson安装的系统了。这里连接的串口号码就是USB连接的串口，在设备管理器中查看。<br><img src="imgs/jetson_flash_connect_putty.png" alt="jetson_flash_connect_putty"></p>
<p>然后配置网络，连接wifi。<a target="_blank" rel="noopener" href="https://github.com/f1tenth/f1tenth_doc/blob/stable/getting_started/software_setup/optional_software_nx.rst">参考</a>中的第三步配置网络，到其中的第5小步即可。</p>
<h2 id="设置从NVME开机启动"><a href="#设置从NVME开机启动" class="headerlink" title="设置从NVME开机启动"></a>设置从NVME开机启动</h2><p><strong>格式化磁盘，设置分区：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sudo gdisk /dev/nvme0n1</span><br><span class="line">command (? for help): o</span><br><span class="line">deletes all partitions and creates a new protective MBR</span><br><span class="line">command (? for help): n</span><br><span class="line">Partition number (1-128, default 1): 1</span><br><span class="line">First sector (34-250069646, default = 2048) or &#123;+-&#125;size&#123;KMGTP&#125;: </span><br><span class="line">Last sector (2048-250069646, default = 250069646) or &#123;+-&#125;size&#123;KMGTP&#125;: +110G #这里表示这个分区的大小是110G，不设置默认剩余全部</span><br><span class="line">Command (? for help): c</span><br><span class="line">Enter name: nx110nvme</span><br><span class="line">Command (? for help): w</span><br><span class="line">Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING</span><br><span class="line"></span><br><span class="line">sudo mkfs.ext4 /dev/nvme0n1p1 #设置分区格式</span><br></pre></td></tr></table></figure>
<p><strong>设置开机启动：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/jetsonhacks/rootOnNVMe.git</span><br><span class="line">cd rootOnNVMe</span><br><span class="line">./copy-rootfs-ssd.sh #复制文件到nvme</span><br><span class="line">./setup-service.sh #设置开机启动，重启生效</span><br></pre></td></tr></table></figure>
<p><strong>注：在有屏幕、键盘、鼠标时也可以使用图形界面，<a target="_blank" rel="noopener" href="https://blog.csdn.net/bit_hxz/article/details/123657164">参考</a></strong></p>
<h2 id="安装JetPack"><a href="#安装JetPack" class="headerlink" title="安装JetPack"></a>安装JetPack</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install nvidia-jetpack</span><br><span class="line">sudo apt show nvidia-jetpack</span><br></pre></td></tr></table></figure>
<p>参考:<a target="_blank" rel="noopener" href="https://docs.nvidia.com/jetson/jetpack/install-jetpack/index.html">https://docs.nvidia.com/jetson/jetpack/install-jetpack/index.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://justqj.github.io/2023/06/25/Linux%E5%AE%89%E8%A3%85Cuda/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="流年">
      <meta itemprop="description" content="记录个人学习的知识和技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流年的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/Linux%E5%AE%89%E8%A3%85Cuda/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-25 16:16:30" itemprop="dateCreated datePublished" datetime="2023-06-25T16:16:30+08:00">2023-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-22 12:50:21" itemprop="dateModified" datetime="2023-04-22T12:50:21+08:00">2023-04-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>NVIDIA提供的CUDA中包含了toolkit和driver，在安装多版本cuda的情况下，一般我们只安装toolkit部分，而driver部分一般是使用系统中的最高版本的cuda对应的driver，向后兼容的。就是说当我们安装的cuda版本比系统中最高版本高时，需要更新系统中的driver，即在安装时driver也需要安装以覆盖系统当前的driver。如果安装的是低版本的cuda，就不用了。</p>
<h2 id="下载CUDA文件"><a href="#下载CUDA文件" class="headerlink" title="下载CUDA文件"></a>下载CUDA文件</h2><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/cuda-downloads">下载地址</a>，选择对应的系统，下载 <code>cuda_xxx.run</code>文件。<br>查看命令行参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh cuda_12.0.0_525.60.13_linux.run --help</span><br></pre></td></tr></table></figure>
<p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh cuda_12.0.0_525.60.13_linux.run </span><br></pre></td></tr></table></figure>
<p>上面的命令会产生一个选择界面，可以选择是否安装driver、toolkit等，以及修改相应的安装路径。也可以使用命令行参数来完成这些事情。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://justqj.github.io/2023/06/25/GPU%E4%B8%8A%E4%B8%8D%E5%90%8C%E7%B2%BE%E5%BA%A6%E7%9A%84%E8%AE%A1%E7%AE%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="流年">
      <meta itemprop="description" content="记录个人学习的知识和技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流年的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/GPU%E4%B8%8A%E4%B8%8D%E5%90%8C%E7%B2%BE%E5%BA%A6%E7%9A%84%E8%AE%A1%E7%AE%97/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-25 16:16:30" itemprop="dateCreated datePublished" datetime="2023-06-25T16:16:30+08:00">2023-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-12 22:57:46" itemprop="dateModified" datetime="2023-06-12T22:57:46+08:00">2023-06-12</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="NVIDIA-GPU不同精度计算的速度对比"><a href="#NVIDIA-GPU不同精度计算的速度对比" class="headerlink" title="NVIDIA GPU不同精度计算的速度对比"></a>NVIDIA GPU不同精度计算的速度对比</h2><p>问题：int8是只能在Tensor Core上还是说也能在CUDA Core上计算，速度是否有区别？<br>实验：在Jetson Xavier NX(CUDA Core 384个，Tensor Core 48个)上测试两个矩阵乘法，一个是int8，一个是fp32，下面的结果显示int8要快于fp32一倍左右。这里的速度是来自CUDA Core本身，即CUDA core跑int8的乘法就是比fp32快，还是说Int8在Tensor Core上面跑的？<br>**根据<a target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/how-to-confirm-whether-tensor-core-is-working-or-not/70263">这个回答</a>**，使用<code>nvprof</code>可以查看是否使用了Tensor Core。如使用下面的命令运行测试脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -E /usr/local/cuda/bin/nvprof  --metrics tensor_precision_fu_utilization,tensor_int_fu_utilization /home/tangpeng/miniforge-pypy3/envs/per-dvfs/bin/python3.6 test.py # -E为了保证sudo使用当前用户的环境变量</span><br></pre></td></tr></table></figure>
<p>得到的结果显示并没有使用tensor core（ tensor_int_fu_utilization 为0），所以加速来自cuda core本身计算int8就比较快？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Device &quot;Xavier (0)&quot;</span><br><span class="line">    Kernel: void at::native::vectorized_elementwise_kernel&lt;int=4, at::native::BinaryFunctor&lt;float, float, float, at::native::MulFunctor&lt;float&gt;&gt;, at::detail::Array&lt;char*, int=3&gt;&gt;(int, float, float)</span><br><span class="line">         20           tensor_precision_fu_utilization   Tensor-Precision Function Unit Utilization    Idle (0)    Idle (0)    Idle (0)</span><br><span class="line">         20                 tensor_int_fu_utilization         Tensor-Int Function Unit Utilization    Idle (0)    Idle (0)    Idle (0)</span><br><span class="line">    Kernel: void at::native::vectorized_elementwise_kernel&lt;int=4, at::native::BinaryFunctor&lt;char, char, char, at::native::MulFunctor&lt;char&gt;&gt;, at::detail::Array&lt;char*, int=3&gt;&gt;(int, char, char)</span><br><span class="line">         10           tensor_precision_fu_utilization   Tensor-Precision Function Unit Utilization    Idle (0)    Idle (0)    Idle (0)</span><br><span class="line">         10                 tensor_int_fu_utilization         Tensor-Int Function Unit Utilization    Idle (0)    Idle (0)    Idle (0)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># test.py</span><br><span class="line">import torch</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">a = torch.randn(1024,1024).cuda()</span><br><span class="line">b = a.clone()</span><br><span class="line"></span><br><span class="line">aint = torch.randint(0,100,(1024,1024),dtype=torch.int8).cuda()</span><br><span class="line">bint = aint.clone()</span><br><span class="line"></span><br><span class="line">for i in range(10): #warm up</span><br><span class="line">    c = a*b</span><br><span class="line">torch.cuda.synchronize()</span><br><span class="line">time1 = time.time()</span><br><span class="line">for i in range(10):</span><br><span class="line">    c = a*b</span><br><span class="line">torch.cuda.synchronize()</span><br><span class="line">time2  =time.time()</span><br><span class="line">print(&quot;fp32: &quot;, time2-time1)</span><br><span class="line"></span><br><span class="line">time1 = time.time()</span><br><span class="line">for i in range(10):</span><br><span class="line">    c = aint*bint</span><br><span class="line">torch.cuda.synchronize()</span><br><span class="line">time2  =time.time()</span><br><span class="line">print(&quot;int8: &quot;, time2-time1)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fp32:  0.002942323684692383</span><br><span class="line">int8:  0.0015864372253417969</span><br></pre></td></tr></table></figure>

<p>怎么查看是否使用了Tensor Core:<br><a target="_blank" rel="noopener" href="https://discuss.pytorch.org/t/how-do-i-know-that-tensor-cores-used-in-pytorch-for-fp16-bfloat16-int8/169763/2">https://discuss.pytorch.org/t/how-do-i-know-that-tensor-cores-used-in-pytorch-for-fp16-bfloat16-int8/169763/2</a><br><a target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/how-to-confirm-whether-tensor-core-is-working-or-not/70263">https://forums.developer.nvidia.com/t/how-to-confirm-whether-tensor-core-is-working-or-not/70263</a><br><a target="_blank" rel="noopener" href="https://discuss.pytorch.org/t/volta-tensor-core-pytorch/18320/8">https://discuss.pytorch.org/t/volta-tensor-core-pytorch/18320/8</a></p>
<p><strong>应该需要使用专门的接口才能使用tensor core，直接这样乘法是不行的</strong></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://justqj.github.io/2023/06/25/GPU%E6%9E%B6%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="流年">
      <meta itemprop="description" content="记录个人学习的知识和技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流年的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/GPU%E6%9E%B6%E6%9E%84/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-25 16:16:30" itemprop="dateCreated datePublished" datetime="2023-06-25T16:16:30+08:00">2023-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-12 20:02:43" itemprop="dateModified" datetime="2023-06-12T20:02:43+08:00">2023-06-12</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Jetson-Xavier-NX"><a href="#Jetson-Xavier-NX" class="headerlink" title="Jetson Xavier NX"></a>Jetson Xavier NX</h2><table>
<thead>
<tr>
<th>-</th>
<th>-</th>
</tr>
</thead>
<tbody><tr>
<td>GPU architecture</td>
<td>Volta</td>
</tr>
<tr>
<td>Cuda core</td>
<td>384</td>
</tr>
<tr>
<td>SM</td>
<td>6</td>
</tr>
<tr>
<td>cuda core/SM</td>
<td>64</td>
</tr>
<tr>
<td>Tensor Core</td>
<td>48</td>
</tr>
<tr>
<td>tensor core/SM</td>
<td>8</td>
</tr>
<tr>
<td>L1 cache</td>
<td>128KB/SM</td>
</tr>
<tr>
<td>L2 cache</td>
<td>256KB</td>
</tr>
<tr>
<td>参考：</td>
<td></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.techpowerup.com/gpu-specs/jetson-xavier-nx-8-gb.c3642">https://www.techpowerup.com/gpu-specs/jetson-xavier-nx-8-gb.c3642</a></td>
<td></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/sm-unit-structure-for-jetson-xavier-family-devices/186740">https://forums.developer.nvidia.com/t/sm-unit-structure-for-jetson-xavier-family-devices/186740</a></td>
<td></td>
</tr>
</tbody></table>
<h2 id="Jetson-AGX-Xavier"><a href="#Jetson-AGX-Xavier" class="headerlink" title="Jetson AGX Xavier"></a>Jetson AGX Xavier</h2><table>
<thead>
<tr>
<th>-</th>
<th>-</th>
</tr>
</thead>
<tbody><tr>
<td>GPU architecture</td>
<td>Volta</td>
</tr>
<tr>
<td>Cuda core</td>
<td>512</td>
</tr>
<tr>
<td>SM</td>
<td>8</td>
</tr>
<tr>
<td>cuda core/SM</td>
<td>64</td>
</tr>
<tr>
<td>Tensor Core</td>
<td>64</td>
</tr>
<tr>
<td>tensor core/SM</td>
<td>8</td>
</tr>
<tr>
<td>L1 cache</td>
<td>128KB/SM</td>
</tr>
<tr>
<td>L2 cache</td>
<td>512KB</td>
</tr>
</tbody></table>
<p><img src="imgs/voltagpu_jetson_agx_xavier.png" alt="jetson_agx_gpu"></p>
<p>Each SM consists of 4 separate processing blocks referred to as SMPs (streaming multiprocessor partitions), each including its own L0 instruction cache, warp scheduler, dispatch unit, and register file, along with CUDA cores and Tensor Cores.<br>参考：<br><a target="_blank" rel="noopener" href="https://developer.nvidia.com/blog/nvidia-jetson-agx-xavier-32-teraops-ai-robotics/">https://developer.nvidia.com/blog/nvidia-jetson-agx-xavier-32-teraops-ai-robotics/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://justqj.github.io/2023/06/25/DarkNet%E6%A1%86%E6%9E%B6%E4%B8%AD%E8%AE%B0%E5%BD%95%E6%AF%8F%E4%B8%80%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="流年">
      <meta itemprop="description" content="记录个人学习的知识和技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流年的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/DarkNet%E6%A1%86%E6%9E%B6%E4%B8%AD%E8%AE%B0%E5%BD%95%E6%AF%8F%E4%B8%80%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-25 16:16:30" itemprop="dateCreated datePublished" datetime="2023-06-25T16:16:30+08:00">2023-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-19 22:05:19" itemprop="dateModified" datetime="2023-06-19T22:05:19+08:00">2023-06-19</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在CUDA中，要较为准确地profile每一层神经网络的执行时间，一般需要使用<code>cudaDeviceSynchronize()</code>同步。参考<a target="_blank" rel="noopener" href="https://github.com/AlexeyAB/darknet/blob/master/src/network_kernels.cu#L83">darknet中写法</a>，来profile每一层的执行时间：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">start_time = time.get() //darknet中使用std::chrono::steady_clock::now();</span><br><span class="line">layer_forward()</span><br><span class="line">cudaDeviceSynchronize()</span><br><span class="line">end_time = time.get()</span><br><span class="line">cost_time = end_time-start_time</span><br></pre></td></tr></table></figure>
<p>每层进行profile会导致整个网络的执行时间边长。在Jetson Xavier NX上测试YOLOV3，得到<br>|方式|时间(ms)|<br>|—|—|<br>|记录每一层时间，总时间也是在推理的开始和结束进行打点记录|20.805|<br>|记录每一层时间，总时间为记录的每一层时间相加|18.65|<br>|不记录每一层时间，总时间为在推理的开始和结束进行打点记录|16.279|<br>因此，计时还是有一些误差，最好对大一些的网络进行逐层计时，或者对block进行计时准确度会高一些。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">流年</p>
  <div class="site-description" itemprop="description">记录个人学习的知识和技术</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">流年</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

  <script async src="/js/cursor/love.min.js"></script>



  <script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script>
  <script>
    function timer() {
      // 建站时间
      var startDate = moment(2022828,"YYYYMMDD");
      // 目前时间
      var now = moment();
      var duration = moment.duration(now.diff(startDate));
      var days = Math.floor(duration.asDays());
      var hours = Math.floor(duration.asHours() - days * 24);
      var minutes = Math.floor(duration.asMinutes() - Math.floor(duration.asHours()) * 60);
      var seconds = Math.floor(duration.asSeconds() - Math.floor(duration.asMinutes()) * 60);

      var textStr = "";

      if (days >=0) {
        textStr = textStr + days + " 天 ";
      }

      if (hours >= 0) {
       if (String(hours).length === 1) {
          hours = "0" + hours;
        }
        textStr = textStr + hours + " 时 ";
      }

      if (minutes >= 0) {
       if (String(minutes).length === 1) {
          minutes = "0" + minutes;
        }
        textStr = textStr + minutes + " 分 ";
      }
      
      if (seconds >= 0) {
       if (String(seconds).length === 1) {
          seconds = "0" + seconds ;
        }
        textStr = textStr + seconds + " 秒 ";
      }
      
      textStr = textStr.replace(/\d+/g, '<span style="color:#1890ff">$&</span>');
      div.innerHTML = `我已在此等候你 ${textStr}`;
    }
    var div = document.createElement("div");
    // 插入到copyright之后
    var copyright = document.querySelector(".copyright");
    document.querySelector(".footer-inner").insertBefore(div, copyright.nextSibling);
    timer();
    setInterval("timer()", 1000)
  </script>

</body>
</html>
